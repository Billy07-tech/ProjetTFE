{% extends 'base.html.twig' %}

{% block title %}Liste des Utilisateurs{% endblock %}

{% block stylesheets %}
  <link rel="stylesheet" href="{{ asset('css/users.css') }}?v={{ random() }}">
{% endblock %}

{% block body %}
  <div class="users-container">
    <div class="users-card">

      <h1 class="users-title">Liste des Utilisateurs</h1>

      {% for message in app.flashes('success') %}
        <div class="alert alert-success">{{ message }}</div>
      {% endfor %}

      <div class="users-table-wrap">
        <table class="users-table users-table--spacious">
          <thead>
            <tr>
              <th class="users-col-id">Id</th>
              <th class="users-col-pseudo">Pseudo</th>
              <th class="users-col-prenom">Prénom</th>
              <th class="users-col-nom">Nom</th>
              <th class="users-col-email">Email</th>
              <th class="users-col-roles">Rôles</th>
              <th class="users-col-actions">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for utilisateur in utilisateurs %}
              <tr>
                <td class="users-col-id">{{ utilisateur.id }}</td>
                <td class="users-col-pseudo">{{ utilisateur.pseudo }}</td>
                <td class="users-col-prenom">{{ utilisateur.prenom }}</td>
                <td class="users-col-nom">{{ utilisateur.nom }}</td>
                <td class="users-col-email">{{ utilisateur.email }}</td>
                <td class="users-col-roles">{{ utilisateur.roles|join(', ') }}</td>
                <td class="users-col-actions">
                  <form action="{{ path('app_utilisateur_supprimer', {'id': utilisateur.id}) }}" method="post" onsubmit="return confirm('Voulez-vous vraiment supprimer cet utilisateur ?');" class="users-actions">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ utilisateur.id) }}">
                    <button type="submit" class="users-btn users-btn--danger">Bannir</button>
                  </form>
                </td>
              </tr>
            {% else %}
              <tr>
                <td colspan="7" class="users-col-empty" style="text-align:center;">Aucun utilisateur trouvé</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </div>
{% endblock %}
